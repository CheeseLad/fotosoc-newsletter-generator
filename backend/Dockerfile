FROM python:3.13.1-slim-bookworm

ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

WORKDIR /app

COPY . /app/

ARG SEND_PASSWORD
ENV SEND_PASSWORD=$SEND_PASSWORD

ARG SMTP_SERVER
ENV SMTP_SERVER=$SMTP_SERVER

ARG SMTP_PORT
ENV SMTP_PORT=$SMTP_PORT

ARG SMTP_USERNAME
ENV SMTP_USERNAME=$SMTP_USERNAME

ARG SMTP_PASSWORD
ENV SMTP_PASSWORD=$SMTP_PASSWORD

ARG SMTP_SECURE
ENV SMTP_SECURE=$SMTP_SECURE

ARG IMGUR_CLIENT_ID
ENV IMGUR_CLIENT_ID=$IMGUR_CLIENT_ID

ARG APP_PORT
ENV APP_PORT=$APP_PORT

RUN pip install --upgrade pip

RUN pip install --no-cache-dir -r requirements.txt

EXPOSE 3001

CMD ["python", "app.py"]
